-- üî• ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏™‡∏Å‡∏ó‡∏µ‡∏°‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö (‡∏à‡∏≥‡∏Ç‡πâ‡∏≤‡∏°‡πÅ‡∏°‡∏û)
-- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ c00kaha

local DataStoreService = game:GetService("DataStoreService")
local Teams = game:GetService("Teams")
local Players = game:GetService("Players")

-- üîë ‡∏ï‡∏±‡πâ‡∏á‡∏£‡∏´‡∏±‡∏™‡∏•‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏µ‡∏°‡πÑ‡∏î‡πâ
local Password = "12345" -- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏î‡πâ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ

-- üíæ DataStore ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ó‡∏µ‡∏°
local teamDataStore = DataStoreService:GetDataStore("SecureTeamSystem")

-- üîÅ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏µ‡∏°
local function changeTeam(player, teamName)
	local team = Teams:FindFirstChild(teamName)
	if team then
		player.Team = team
		player.TeamColor = team.TeamColor
		print(player.Name .. " ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ó‡∏µ‡∏°‡πÄ‡∏õ‡πá‡∏ô " .. teamName)

		-- ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ô DataStore
		local success, err = pcall(function()
			teamDataStore:SetAsync(player.UserId, teamName)
		end)
		if not success then
			warn("‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏µ‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " .. err)
		end
	else
		player:Kick("‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏ó‡∏µ‡∏°‡∏ä‡∏∑‡πà‡∏≠ '" .. teamName .. "' ‚ùå")
	end
end

-- üß© ‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏µ‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Å‡∏°
Players.PlayerAdded:Connect(function(player)
	local success, teamName = pcall(function()
		return teamDataStore:GetAsync(player.UserId)
	end)

	if success and teamName then
		local team = Teams:FindFirstChild(teamName)
		if team then
			player.Team = team
			player.TeamColor = team.TeamColor
			print("‡πÇ‡∏´‡∏•‡∏î‡∏ó‡∏µ‡∏°‡∏Ç‡∏≠‡∏á " .. player.Name .. ": " .. teamName)
		end
	end

	-- üí¨ ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏ä‡∏ó
	player.Chatted:Connect(function(msg)
		-- ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á: !team <‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡∏°> <‡∏£‡∏´‡∏±‡∏™>
		local command, teamName, key = msg:match("^!(%w+)%s+(%w+)%s*(.*)$")
		if command == "team" then
			if key == Password then
				changeTeam(player, teamName)
			else
				player:Kick("‚ùå ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‚ùå")
			end
		end
	end)
        end)
